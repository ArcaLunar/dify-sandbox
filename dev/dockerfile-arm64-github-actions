FROM python:3.10-slim

RUN apt-get update && apt-get install -y \
    pkg-config gcc libseccomp-dev \
    wget \
    && rm -rf /var/lib/apt/lists/*

RUN wget https://go.dev/dl/go1.20.6.linux-arm64.tar.gz -O /opt/go1.20.6.linux-arm64.tar.gz \
    && tar zxvf /opt/go1.20.6.linux-arm64.tar.gz -C /opt \
    && rm /opt/go1.20.6.linux-arm64.tar.gz \
    && ln -s /opt/go/bin/go /usr/local/bin/go

RUN ls -l && ls / && find / -name github && go mod tidy \
    && bash ./build/build_arm64.sh

RUN pip install httpx requests jinja2
